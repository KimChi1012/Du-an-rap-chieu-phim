<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>High Cinema - B√°o c√°o doanh thu</title>
    <link rel="icon" type="image/png" sizes="1000x1000" href="images/logo-hc.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module" src="js/script.js"></script>
</head>

<body class="bg-white-50 revenue-management" data-page="admin">
<div class="flex h-screen">
    
    <!-- Sidebar -->
    <div id="shared-sidebar" class="w-65"></div>

    <div class="flex-1 overflow-auto">
        <!-- Header -->
        <div id="shared-header"></div>

        <main class="p-8">
            <h1 class="text-3xl font-bold text-gray-800 mb-8 border-b pb-4">B√°o c√°o doanh thu</h1>

            <!-- ====== CARDS TH·ªêNG K√ä DOANH THU ====== -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <!-- T·ªïng doanh thu -->
                <div class="user-stats-card">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="text-xl font-bold text-gray-500">T·ªïng doanh thu</p>
                            <p class="text-2xl font-bold mt-2 text-gray-800" id="totalRevenue">0 VNƒê</p>
                        </div>
                        <div class="bg-green-50 text-green-600 p-3 rounded-lg">
                            <span class="text-3xl emoji">üí∞</span>
                        </div>
                    </div>
                </div>

                <!-- Doanh thu h√¥m nay -->
                <div class="user-stats-card">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="text-xl font-bold text-gray-500">H√¥m nay</p>
                            <p class="text-2xl font-bold text-gray-800 mt-2" id="todayRevenue">0 VNƒê</p>
                        </div>
                        <div class="bg-blue-50 text-blue-600 p-3 rounded-lg">
                            <span class="text-3xl emoji">üìÖ</span>
                        </div>
                    </div>
                </div>

                <!-- Doanh thu th√°ng n√†y -->
                <div class="user-stats-card">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="text-xl font-bold text-gray-500">Th√°ng n√†y</p>
                            <p class="text-2xl font-bold text-gray-800 mt-2" id="monthRevenue">0 VNƒê</p>
                        </div>
                        <div class="bg-purple-50 text-purple-600 p-3 rounded-lg">
                            <span class="text-3xl emoji">üìä</span>
                        </div>
                    </div>
                </div>

                <!-- T·ªïng h√≥a ƒë∆°n -->
                <div class="user-stats-card">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="text-xl font-bold text-gray-500">T·ªïng h√≥a ƒë∆°n</p>
                            <p class="text-2xl font-bold text-gray-800 mt-2" id="totalInvoices">0</p>
                        </div>
                        <div class="bg-yellow-50 text-yellow-600 p-3 rounded-lg">
                            <span class="text-3xl emoji">üßæ</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ====== B·ªò L·ªåC DOANH THU ====== -->
            <div class="user-table-container mb-8">
                <div class="flex items-center mb-6">
                    <h2 class="text-xl font-semibold text-gray-800">L·ªçc b√°o c√°o doanh thu</h2>
                </div>
                
                <div class="filter-controls-grid">
                    <div class="filter-group">
                        <label class="form-label">Lo·∫°i b√°o c√°o</label>
                        <select id="reportType" class="form-input" onchange="window.revenueManagement?.toggleFilterInputs()">
                            <option value="">-- Ch·ªçn lo·∫°i b√°o c√°o --</option>
                            <option value="daily">Theo ng√†y</option>
                            <option value="monthly">Theo th√°ng</option>
                            <option value="yearly">Theo nƒÉm</option>
                        </select>
                    </div>
                    
                    <div class="filter-group" id="dateFilter" style="display: none;">
                        <label class="form-label">Ch·ªçn th√°ng</label>
                        <input type="month" id="filterMonth" class="form-input">
                    </div>
                    
                    <div class="filter-group" id="monthFilter" style="display: none;">
                        <label class="form-label">Ch·ªçn nƒÉm</label>
                        <input type="number" id="filterYear" min="2020" max="2030" class="form-input">
                    </div>
                    
                    <div class="filter-group" id="chartTypeFilter" style="display: none;">
                        <label class="form-label">Lo·∫°i bi·ªÉu ƒë·ªì</label>
                        <select id="chartType" class="form-input">
                            <option value="bar">Bi·ªÉu ƒë·ªì c·ªôt</option>
                            <option value="line">Bi·ªÉu ƒë·ªì ƒë∆∞·ªùng</option>
                        </select>
                    </div>
                    
                    <div class="filter-group" id="filterButtonGroup" style="display: none;">
                        <label class="form-label">&nbsp;</label>
                        <button class="add-user-button" id="filterBtn" onclick="window.revenueManagement?.loadFilteredRevenue()">
                            <i class="fa fa-filter emoji"></i>L·ªçc d·ªØ li·ªáu
                        </button>
                    </div>
                </div>
                
                <div id="filteredResult" class="mt-6"></div>
            </div>

            <!-- ====== TOP H√ìA ƒê∆†N ====== -->
            <div class="user-table-container">
                <div class="flex items-center mb-6">
                    <h2 class="text-xl font-semibold text-gray-800">Top 5 h√≥a ƒë∆°n cao nh·∫•t</h2>
                </div>

                <div class="table-scroll-area">
                    <table class="user-table">
                        <thead class="table-header-gradient">
                            <tr>
                                <th class="table-header-cell w-[120px]">M√£ h√≥a ƒë∆°n</th>
                                <th class="table-header-cell w-[180px]">Kh√°ch h√†ng</th>
                                <th class="table-header-cell w-[200px]">Email</th>
                                <th class="table-header-cell w-[150px]">Phim</th>
                                <th class="table-header-cell w-[120px] text-center">Ng√†y t·∫°o</th>
                                <th class="table-header-cell w-[150px] text-center">T·ªïng ti·ªÅn</th>
                                <th class="table-header-cell w-[120px] text-center">H√†nh ƒë·ªông</th>
                            </tr>
                        </thead>
                        <tbody id="topInvoicesTable" class="divide-y divide-gray-100 bg-white">
                            <tr>
                                <td colspan="7" class="text-center py-8 text-gray-500">
                                    <div class="revenue-loading">ƒêang t·∫£i d·ªØ li·ªáu...</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>
</div>

<!-- Modal hi·ªÉn th·ªã h√≥a ƒë∆°n -->
<div id="invoiceModal" class="revenue-modal-overlay" style="display: none;">
    <div class="modal-container revenue-invoice-modal">
        <div class="revenue-modal-header">
            <h3>Chi ti·∫øt h√≥a ƒë∆°n</h3>
            <button class="revenue-modal-close" onclick="window.revenueManagement?.closeInvoiceModal()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="revenue-modal-body">
            <div id="invoiceModalContent" class="revenue-invoice-content">
                <div class="revenue-loading">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>ƒêang t·∫£i th√¥ng tin h√≥a ƒë∆°n...</p>
                </div>
            </div>
        </div>
        
        <div class="revenue-modal-footer">
            <button class="btn-print" onclick="window.revenueManagement?.printInvoice()">
                <i class="fas fa-print"></i> <span>In h√≥a ƒë∆°n</span>
            </button>
            <button class="btn-download" onclick="window.revenueManagement?.downloadInvoice()">
                <i class="fas fa-download"></i> <span>T·∫£i xu·ªëng</span>
            </button>
            <button class="btn-close" onclick="window.revenueManagement?.closeInvoiceModal()">
                <i class="fas fa-home"></i> <span>ƒê√≥ng</span>
            </button>
        </div>
    </div>
</div>

<script type="module" src="js/script.js"></script>
</body>
</html>